{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\aggad.samy\\\\Workspace\\\\UITP-React-Spring\\\\Front-end\\\\src\\\\components\\\\Confirmation\\\\Confirmation.js\";\nimport Frequency from '../FormPage/Mainform/Frequency/Radio';\nimport Comments from '../FormPage/Mainform/Comment/Comment';\nimport Mode from '../ModeSelection/Mode';\nimport Motivation from '../FormPage/Mainform/Motivation/Motivation';\nimport { Link, Redirect } from 'react-router-dom';\nimport React from 'react';\nimport { Container, Row, Col, Button, Form, FormGroup } from 'reactstrap';\nexport default class Confirmation extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      categories: [],\n      motivation: [],\n      questions: [],\n      active: null,\n      index: 0,\n      regularityId: 0,\n      // answers: [],\n      // value: [],\n      selectedCat: 1,\n      selectedMode: 0\n    };\n\n    this.submit = e => {\n      e.preventDefault();\n      const selectedModes = JSON.parse(localStorage.getItem(\"selectedModes\"));\n      JSON.parse(localStorage.getItem(\"selectedModes\"));\n      let results = [];\n      const localPtoId = parseInt(localStorage.getItem(\"ptoid\")); // -------------- GROUPED RESULTS POSTING -----------------------\n\n      if (JSON.parse(localStorage.getItem(\"group\")) === 1) {\n        selectedModes.map(mode => {\n          return results.push(this.props.location.state.answers.map(answer => {\n            return {\n              ptoID: localPtoId,\n              questionID: parseInt(answer.questionID),\n              frequency: parseInt(answer.frequency),\n              modeID: parseInt(mode.id),\n              motivationID: parseInt(answer.motivationID),\n              comment: answer.comment,\n              periodeID: parseInt(answer.periode)\n            };\n          }));\n        }); // -------------- SEPARATE RESULTS POSTING -----------------------\n      } else {\n        selectedModes.map(mode => {\n          const oneSelectedMode = JSON.parse(localStorage.getItem(mode.id));\n          return results.push(oneSelectedMode.map(answer => {\n            return {\n              ptoID: localPtoId,\n              questionID: parseInt(answer.questionID),\n              frequency: parseInt(answer.frequency),\n              modeID: parseInt(answer.modeID),\n              motivationID: parseInt(answer.motivationID),\n              comment: answer.comment,\n              periode: parseInt(answer.periode)\n            };\n          }));\n        });\n      } // -------------- AXIOS POST -----------------------\n      // let successBoolean = true\n      // results.forEach((resultOne) => {\n      //     axios.post(`${URLStorage.API_URL}/resultAll`, {\n      //         resultOne // variable name asked by the backend, do not change\n      //     })\n      //         .then((res) => { return res.status !== 202 ? successBoolean = false : undefined })\n      //         .then(item => { return successBoolean === true ? this.clearQuestions(selectedModes) && this.goTo(\"reports\") : this.goTo(\"error\") })\n      // })\n\n    };\n  }\n\n  clearQuestions(selectedModes) {\n    selectedModes.forEach(mode => localStorage.removeItem(\"\".concat(mode.id)));\n    return true;\n  }\n\n  goTo(route) {\n    this.props.history.replace(\"/\".concat(route));\n  }\n\n  render() {\n    const selectedModes = JSON.parse(localStorage.getItem(\"selectedModes\")); //console.log(selectedModes)\n    // const allAnswers = selectedModes.map((item, idx) => {\n    //     return JSON.parse(localStorage.getItem(`${item.id}`));\n    // })\n    //var questionData = localStorage.getItem(\"\")\n\n    var answers = JSON.parse(localStorage.getItem(\"bigItem\")); //console.log(\"bigItem\", answers)\n    // var regularityId = \n    // this.setState({ active: index, regularityId: index })\n\n    const motivations = this.props.location.state.motivations;\n    return React.createElement(React.Fragment, null, React.createElement(\"div\", {\n      style: {\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"space-between\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }, selectedModes.map((mode, idx) => React.createElement(Mode, {\n      key: idx,\n      id: mode.id,\n      index: idx,\n      name: mode.name,\n      url: mode,\n      selected: true,\n      maxHeight: \"50px\",\n      grouped: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }, React.createElement(Button, {\n      onClick: this.submit,\n      className: \"submit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }, \"Confirm Submission\"))), React.createElement(Container, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }, JSON.parse(localStorage.getItem(\"group\")) === 1 ?\n    /* DISPLAY GROUPED RESULTS  */\n    answers.map((data, index) => {\n      // console.log(\"ANSWERS \", answers[index].question)\n      // console.log(\"ANSWERS \", data.frequency)\n      return React.createElement(Container, {\n        key: index,\n        className: \"dark-overlay\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }, React.createElement(Row, {\n        key: index,\n        style: {\n          padding: '15px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      }, React.createElement(Col, {\n        key: index,\n        sm: \"12\",\n        md: {\n          size: 12\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      }, React.createElement(FormGroup, {\n        key: index,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132\n        },\n        __self: this\n      }, React.createElement(\"h5\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133\n        },\n        __self: this\n      }, \" \", index + 1, \" \", data.question, \" \"), React.createElement(Frequency, {\n        value: index,\n        className: \"active\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        },\n        __self: this\n      })), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      }, \"Comment : \", data.comment ? data.comment : \"none\"), React.createElement(Motivation, {\n        key: data.index,\n        questionId: data.questionID,\n        items: motivations,\n        value: data.motivationID,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      }), React.createElement(Comments, {\n        key: data.questionID + 'coucou',\n        questionId: data.questionID,\n        comment: data.comment,\n        disable: \"disabled\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      }))));\n    }) :\n    /* DISPLAY SEPARATE RESULTS */\n    JSON.parse(localStorage.getItem(\"selectedModes\")).map(mode => {\n      return JSON.parse(localStorage.getItem(mode.id)).map((data, index) => {\n        return React.createElement(Container, {\n          key: index,\n          className: \"dark-overlay\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 157\n          },\n          __self: this\n        }, index === 0 && React.createElement(\"h3\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 158\n          },\n          __self: this\n        }, mode.name), React.createElement(Row, {\n          key: index,\n          style: {\n            padding: '15px'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 159\n          },\n          __self: this\n        }, React.createElement(Col, {\n          key: index,\n          sm: \"12\",\n          md: {\n            size: 12\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 160\n          },\n          __self: this\n        }, React.createElement(FormGroup, {\n          key: index,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 161\n          },\n          __self: this\n        }, React.createElement(\"h3\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 162\n          },\n          __self: this\n        }, \" \", data.index, \" \", data.question, \" \"), React.createElement(Frequency, {\n          key: data.questionID,\n          questionId: data.questionID,\n          value: data.frequency,\n          disable: \"disabled\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 163\n          },\n          __self: this\n        })), React.createElement(\"h5\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 165\n          },\n          __self: this\n        }, \"Comment : \", data.comment))));\n      });\n    }), React.createElement(Button, {\n      onClick: this.submit,\n      className: \"submit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    }, \"Confirm Submission\"), React.createElement(Link, {\n      to: {\n        pathname: \"/formpage\"\n      },\n      className: \"back-form\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176\n      },\n      __self: this\n    }, React.createElement(Button, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177\n      },\n      __self: this\n    }, \"Back to Form\"))));\n  }\n\n}","map":{"version":3,"sources":["C:\\Users\\aggad.samy\\Workspace\\UITP-React-Spring\\Front-end\\src\\components\\Confirmation\\Confirmation.js"],"names":["Frequency","Comments","Mode","Motivation","Link","Redirect","React","Container","Row","Col","Button","Form","FormGroup","Confirmation","Component","state","categories","motivation","questions","active","index","regularityId","selectedCat","selectedMode","submit","e","preventDefault","selectedModes","JSON","parse","localStorage","getItem","results","localPtoId","parseInt","map","mode","push","props","location","answers","answer","ptoID","questionID","frequency","modeID","id","motivationID","comment","periodeID","periode","oneSelectedMode","clearQuestions","forEach","removeItem","goTo","route","history","replace","render","motivations","display","alignItems","justifyContent","idx","name","data","padding","size","question","pathname"],"mappings":"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","sourcesContent":["import Frequency from '../FormPage/Mainform/Frequency/Radio';\nimport Comments from '../FormPage/Mainform/Comment/Comment';\nimport Mode from '../ModeSelection/Mode'\nimport Motivation from '../FormPage/Mainform/Motivation/Motivation'\nimport { Link, Redirect } from 'react-router-dom';\nimport React from 'react';\nimport { Container, Row, Col, Button, Form, FormGroup } from 'reactstrap';\n\nexport default class Confirmation extends React.Component {\n\n    state = {\n        categories:[], \n        motivation:[],\n        questions: [],\n        active: null,\n        index: 0,\n        regularityId: 0,\n        // answers: [],\n        // value: [],\n        selectedCat:1,\n        selectedMode: 0,\n\n    };\n\n    clearQuestions(selectedModes)  {\n         selectedModes.forEach(mode => localStorage.removeItem(`${mode.id}`));\n        return true;\n    }\n\n    goTo(route) {\n        this.props.history.replace(`/${route}`);\n    }\n\n    submit = (e) => {\n\n        e.preventDefault();\n        const selectedModes = JSON.parse(localStorage.getItem(\"selectedModes\"));\n        JSON.parse(localStorage.getItem(\"selectedModes\"));\n        let results = [];\n        const localPtoId = parseInt(localStorage.getItem(\"ptoid\"));\n\n        // -------------- GROUPED RESULTS POSTING -----------------------\n        if (JSON.parse(localStorage.getItem(\"group\")) === 1) {\n            selectedModes.map((mode) => {\n                return results.push(this.props.location.state.answers.map((answer) => {\n                    return {\n                        ptoID: localPtoId,\n                        questionID: parseInt(answer.questionID),\n                        frequency: parseInt(answer.frequency),\n                        modeID: parseInt(mode.id),\n                        motivationID: parseInt(answer.motivationID),\n                        comment: answer.comment,\n                        periodeID: parseInt(answer.periode)\n\n                    }\n                }))\n            });\n\n            // -------------- SEPARATE RESULTS POSTING -----------------------\n        } else {\n            selectedModes.map(mode => {\n                const oneSelectedMode = JSON.parse(localStorage.getItem(mode.id));\n                return results.push(oneSelectedMode.map((answer) => {\n                    return {\n                        ptoID: localPtoId,\n                        questionID: parseInt(answer.questionID),\n                        frequency: parseInt(answer.frequency),\n                        modeID: parseInt(answer.modeID),\n                        motivationID: parseInt(answer.motivationID),\n                        comment: answer.comment,\n                        periode: parseInt(answer.periode),\n                    }\n                }\n                ))\n            })\n        }\n\n        // -------------- AXIOS POST -----------------------\n\n        // let successBoolean = true\n\n        // results.forEach((resultOne) => {\n        //     axios.post(`${URLStorage.API_URL}/resultAll`, {\n        //         resultOne // variable name asked by the backend, do not change\n        //     })\n        //         .then((res) => { return res.status !== 202 ? successBoolean = false : undefined })\n        //         .then(item => { return successBoolean === true ? this.clearQuestions(selectedModes) && this.goTo(\"reports\") : this.goTo(\"error\") })\n                \n        // })\n\n\n\n    }\n\n    render() {\n\n        const selectedModes = JSON.parse(localStorage.getItem(\"selectedModes\"));\n        //console.log(selectedModes)\n        // const allAnswers = selectedModes.map((item, idx) => {\n        //     return JSON.parse(localStorage.getItem(`${item.id}`));\n        // })\n\n        //var questionData = localStorage.getItem(\"\")\n        var answers = JSON.parse(localStorage.getItem(\"bigItem\"))\n        //console.log(\"bigItem\", answers)\n        // var regularityId = \n        // this.setState({ active: index, regularityId: index })\n\n\n        const { motivations } = this.props.location.state;\n\n        return (\n            <>\n\n                <div style={{display: \"flex\", alignItems:\"center\", justifyContent: \"space-between\"}}>\n                    {selectedModes.map((mode, idx) => <Mode key={idx} id={mode.id} index={idx} name={mode.name} url={mode} selected={true} maxHeight=\"50px\" grouped={true}  />)}\n                    <div>\n                        <Button onClick={this.submit} className=\"submit\">Confirm Submission</Button>\n                    </div>\n                </div>\n            <Container>\n\n                {JSON.parse(localStorage.getItem(\"group\")) === 1\n                    ?\n                    /* DISPLAY GROUPED RESULTS  */\n                    answers.map((data, index) => {\n                        // console.log(\"ANSWERS \", answers[index].question)\n                        // console.log(\"ANSWERS \", data.frequency)\n                        return <Container key={index} className=\"dark-overlay\" >\n                            <Row key={index} style={{ padding: '15px' }}>\n                                <Col key={index} sm=\"12\" md={{ size: 12 }}>\n                                    <FormGroup key={index}>\n                                        <h5> {index + 1} {data.question} </h5>\n                                        {/* <Frequency key={data.question} questionId={data.question} value={data.frequency} disable={\"disabled\"} /> */}\n                                        < Frequency \n                                            value={index}\n                                            className={\"active\"}\n                                            \n                                        />\n                                    </FormGroup>\n                                    <p>Comment : {data.comment ? data.comment : \"none\"}</p>\n                                    <Motivation key={data.index} questionId={data.questionID} items={motivations} value={data.motivationID} />\n\n                                    <Comments key={data.questionID + 'coucou'} questionId={data.questionID} comment={data.comment} disable={\"disabled\"} />\n\n                                </Col>\n\n                            </Row>\n                        </Container>\n                    })\n\n                    :\n                    /* DISPLAY SEPARATE RESULTS */\n                    JSON.parse(localStorage.getItem(\"selectedModes\")).map((mode) => {\n                        return JSON.parse(localStorage.getItem(mode.id)).map((data, index) => {\n                            return (\n                                <Container key={index} className=\"dark-overlay\" >\n                                    {index === 0 && <h3>{mode.name}</h3>}\n                                    <Row key={index} style={{ padding: '15px' }}>\n                                        <Col key={index} sm=\"12\" md={{ size: 12 }}>\n                                            <FormGroup key={index}>\n                                                <h3> {data.index} {data.question} </h3>\n                                                <Frequency key={data.questionID} questionId={data.questionID} value={data.frequency} disable={\"disabled\"} />\n                                            </FormGroup>\n                                            <h5>Comment : {data.comment}</h5>\n                                            {/* <Motivation key={data.questionID} questionId={data.questionID} items={motivations} value={data.motivationID} /> */}\n                                            {/* <Comments key={data.questionID + 'coucou'} questionId={data.questionID} comment={data.comment} disable={\"disabled\"} /> */}\n                                        </Col>\n                                    </Row>\n                                </Container>\n                            )\n                        })\n                    })\n                }\n                <Button onClick={this.submit} className=\"submit\">Confirm Submission</Button>\n                <Link to={{ pathname: \"/formpage\"}} className=\"back-form\">\n                    <Button>Back to Form</Button>\n                </Link>\n                </Container>\n            </>\n        )\n\n    }\n\n}\n\n"]},"metadata":{},"sourceType":"module"}