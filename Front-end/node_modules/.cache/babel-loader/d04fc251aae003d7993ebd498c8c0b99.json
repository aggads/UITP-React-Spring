{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\aggad.samy\\\\Workspace\\\\uitp-service\\\\Front-end\\\\src\\\\components\\\\FormPage\\\\Confirmation\\\\Confirmation.js\";\nimport Frequency from '../Mainform/Frequency/Radio';\nimport Comments from '../Mainform/Comment/Comment';\nimport Mode from '../../ModeSelection/Mode'; // import Legend from './Legend/Legend';\n\nimport Motivation from '../Mainform/Motivation/Motivation'; // import Categories from '../Categories/Categories'\n\nimport URLStorage from '../../../constants';\nimport { Link, Redirect } from 'react-router-dom';\nimport axios from 'axios';\nimport React from 'react';\nimport { Container, Row, Col, Button, Form, FormGroup } from 'reactstrap'; // import './MainForm.css'\n\nexport default class Confirmation extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {// categories:[], \n      // motivation:[],\n      // questions: [],\n      // answers: [],\n      // value: [],\n      // selectedCat:1,\n      // selectedMode: 0,\n    };\n\n    this.submit = e => {\n      e.preventDefault();\n      const selectedModes = JSON.parse(localStorage.getItem(\"selectedModes\"));\n      JSON.parse(localStorage.getItem(\"selectedModes\"));\n      let results = [];\n      const localPtoId = parseInt(localStorage.getItem(\"ptoid\")); // -------------- GROUPED RESULTS POSTING -----------------------\n\n      if (JSON.parse(localStorage.getItem(\"group\")) === 1) {\n        selectedModes.map(mode => {\n          return results.push(this.props.location.state.answers.map(answer => {\n            return {\n              ptoID: localPtoId,\n              questionID: parseInt(answer.questionID),\n              frequency: parseInt(answer.frequency),\n              modeID: parseInt(mode.id),\n              motivationID: parseInt(answer.motivationID),\n              comment: answer.comment,\n              periodeID: parseInt(answer.periode)\n            };\n          }));\n        }); // -------------- SEPARATE RESULTS POSTING -----------------------\n      } else {\n        selectedModes.map(mode => {\n          const oneSelectedMode = JSON.parse(localStorage.getItem(mode.id));\n          return results.push(oneSelectedMode.map(answer => {\n            return {\n              ptoID: localPtoId,\n              questionID: parseInt(answer.questionID),\n              frequency: parseInt(answer.frequency),\n              modeID: parseInt(answer.modeID),\n              motivationID: parseInt(answer.motivationID),\n              comment: answer.comment,\n              periode: parseInt(answer.periode)\n            };\n          }));\n        });\n      } // -------------- AXIOS POST -----------------------\n\n\n      let successBoolean = true;\n      results.forEach(resultOne => {\n        axios.post(\"\".concat(URLStorage.API_URL, \"/resultAll\"), {\n          resultOne // variable name asked by the backend, do not change\n\n        }).then(res => {\n          return res.status !== 202 ? successBoolean = false : undefined;\n        }).then(item => {\n          return successBoolean === true ? this.clearQuestions(selectedModes) && this.goTo(\"reports\") : this.goTo(\"error\");\n        });\n      });\n    };\n  }\n\n  clearQuestions(selectedModes) {\n    selectedModes.forEach(mode => localStorage.removeItem(\"\".concat(mode.id)));\n    return true;\n  }\n\n  goTo(route) {\n    this.props.history.replace(\"/\".concat(route));\n  }\n\n  render() {\n    const selectedModes = JSON.parse(localStorage.getItem(\"selectedModes\")); // const allAnswers = selectedModes.map((item, idx) => {\n    //     return JSON.parse(localStorage.getItem(`${item.id}`));\n    // })\n\n    const _this$props$location$ = this.props.location.state,\n          answers = _this$props$location$.answers,\n          motivations = _this$props$location$.motivations;\n    return React.createElement(React.Fragment, null, React.createElement(\"div\", {\n      style: {\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"space-between\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }, selectedModes.map((mode, idx) => React.createElement(Mode, {\n      key: idx,\n      id: mode.id,\n      index: idx,\n      name: mode.mode_name,\n      url: mode,\n      selected: true,\n      maxHeight: \"50px\",\n      grouped: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }, React.createElement(Button, {\n      onClick: this.submit,\n      className: \"submit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }, \"Confirm Submission\"))), React.createElement(Container, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, JSON.parse(localStorage.getItem(\"group\")) === 1 ?\n    /* DISPLAY GROUPED RESULTS  */\n    answers.map((data, index) => {\n      return React.createElement(Container, {\n        key: index,\n        className: \"dark-overlay\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      }, React.createElement(Row, {\n        key: index,\n        style: {\n          padding: '15px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      }, React.createElement(Col, {\n        key: index,\n        sm: \"12\",\n        md: {\n          size: 12\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      }, React.createElement(FormGroup, {\n        key: index,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      }, React.createElement(\"h5\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }, \" \", index + 1, \" \", data.question, \" \"), React.createElement(Frequency, {\n        key: data.questionID,\n        questionId: data.questionID,\n        value: data.frequency,\n        disable: \"disabled\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      })), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132\n        },\n        __self: this\n      }, \"Comment : \", data.comment ? data.comment : \"none\"))));\n    }) :\n    /* DISPLAY SEPARATE RESULTS */\n    JSON.parse(localStorage.getItem(\"selectedModes\")).map(mode => {\n      return JSON.parse(localStorage.getItem(mode.id)).map((data, index) => {\n        return React.createElement(Container, {\n          key: index,\n          className: \"dark-overlay\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 148\n          },\n          __self: this\n        }, index === 0 && React.createElement(\"h3\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 149\n          },\n          __self: this\n        }, mode.mode_name), React.createElement(Row, {\n          key: index,\n          style: {\n            padding: '15px'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 150\n          },\n          __self: this\n        }, React.createElement(Col, {\n          key: index,\n          sm: \"12\",\n          md: {\n            size: 12\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 151\n          },\n          __self: this\n        }, React.createElement(FormGroup, {\n          key: index,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 152\n          },\n          __self: this\n        }, React.createElement(\"h3\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 153\n          },\n          __self: this\n        }, \" \", data.index, \" \", data.question, \" \"), React.createElement(Frequency, {\n          key: data.questionID,\n          questionId: data.questionID,\n          value: data.frequency,\n          disable: \"disabled\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 154\n          },\n          __self: this\n        })), React.createElement(\"h5\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 156\n          },\n          __self: this\n        }, \"Comment : \", data.comment), React.createElement(Motivation, {\n          key: data.questionID,\n          questionId: data.questionID,\n          items: motivations,\n          value: data.motivationID,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 157\n          },\n          __self: this\n        }))));\n      });\n    }), React.createElement(Button, {\n      onClick: this.submit,\n      className: \"submit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166\n      },\n      __self: this\n    }, \"Confirm Submission\"), React.createElement(Link, {\n      to: {\n        pathname: \"/formpage\"\n      },\n      className: \"back-form\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167\n      },\n      __self: this\n    }, React.createElement(Button, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168\n      },\n      __self: this\n    }, \"Back to Form\"))));\n  }\n\n}","map":{"version":3,"sources":["C:\\Users\\aggad.samy\\Workspace\\uitp-service\\Front-end\\src\\components\\FormPage\\Confirmation\\Confirmation.js"],"names":["Frequency","Comments","Mode","Motivation","URLStorage","Link","Redirect","axios","React","Container","Row","Col","Button","Form","FormGroup","Confirmation","Component","state","submit","e","preventDefault","selectedModes","JSON","parse","localStorage","getItem","results","localPtoId","parseInt","map","mode","push","props","location","answers","answer","ptoID","questionID","frequency","modeID","id","motivationID","comment","periodeID","periode","oneSelectedMode","successBoolean","forEach","resultOne","post","API_URL","then","res","status","undefined","item","clearQuestions","goTo","removeItem","route","history","replace","render","motivations","display","alignItems","justifyContent","idx","mode_name","data","index","padding","size","question","pathname"],"mappings":"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","sourcesContent":["import Frequency from '../Mainform/Frequency/Radio';\nimport Comments from '../Mainform/Comment/Comment';\n\nimport Mode from '../../ModeSelection/Mode'\n\n// import Legend from './Legend/Legend';\nimport Motivation from '../Mainform/Motivation/Motivation'\n// import Categories from '../Categories/Categories'\nimport URLStorage from '../../../constants';\nimport { Link, Redirect } from 'react-router-dom';\n\nimport axios from 'axios';\nimport React from 'react';\nimport { Container, Row, Col, Button, Form, FormGroup } from 'reactstrap';\n\n// import './MainForm.css'\n\nexport default class Confirmation extends React.Component {\n\n    state = {\n        // categories:[], \n        // motivation:[],\n        // questions: [],\n        // answers: [],\n        // value: [],\n        // selectedCat:1,\n        // selectedMode: 0,\n\n    };\n\n    clearQuestions(selectedModes)  {\n         selectedModes.forEach(mode => localStorage.removeItem(`${mode.id}`));\n        return true;\n    }\n\n    goTo(route) {\n        this.props.history.replace(`/${route}`);\n    }\n\n    submit = (e) => {\n\n        e.preventDefault();\n        const selectedModes = JSON.parse(localStorage.getItem(\"selectedModes\"));\n        JSON.parse(localStorage.getItem(\"selectedModes\"));\n        let results = [];\n        const localPtoId = parseInt(localStorage.getItem(\"ptoid\"));\n\n        // -------------- GROUPED RESULTS POSTING -----------------------\n        if (JSON.parse(localStorage.getItem(\"group\")) === 1) {\n            selectedModes.map((mode) => {\n                return results.push(this.props.location.state.answers.map((answer) => {\n                    return {\n                        ptoID: localPtoId,\n                        questionID: parseInt(answer.questionID),\n                        frequency: parseInt(answer.frequency),\n                        modeID: parseInt(mode.id),\n                        motivationID: parseInt(answer.motivationID),\n                        comment: answer.comment,\n                        periodeID: parseInt(answer.periode)\n\n                    }\n                }))\n            });\n\n            // -------------- SEPARATE RESULTS POSTING -----------------------\n        } else {\n            selectedModes.map(mode => {\n                const oneSelectedMode = JSON.parse(localStorage.getItem(mode.id));\n                return results.push(oneSelectedMode.map((answer) => {\n                    return {\n                        ptoID: localPtoId,\n                        questionID: parseInt(answer.questionID),\n                        frequency: parseInt(answer.frequency),\n                        modeID: parseInt(answer.modeID),\n                        motivationID: parseInt(answer.motivationID),\n                        comment: answer.comment,\n                        periode: parseInt(answer.periode),\n                    }\n                }\n                ))\n            })\n        }\n\n        // -------------- AXIOS POST -----------------------\n\n        let successBoolean = true\n\n        results.forEach((resultOne) => {\n            axios.post(`${URLStorage.API_URL}/resultAll`, {\n                resultOne // variable name asked by the backend, do not change\n            })\n                .then((res) => { return res.status !== 202 ? successBoolean = false : undefined })\n                .then(item => { return successBoolean === true ? this.clearQuestions(selectedModes) && this.goTo(\"reports\") : this.goTo(\"error\") })\n                \n        })\n\n\n\n    }\n\n    render() {\n\n        const selectedModes = JSON.parse(localStorage.getItem(\"selectedModes\"));\n        // const allAnswers = selectedModes.map((item, idx) => {\n        //     return JSON.parse(localStorage.getItem(`${item.id}`));\n        // })\n\n        const { answers, motivations } = this.props.location.state;\n\n        return (\n            <>\n\n                <div style={{display: \"flex\", alignItems:\"center\", justifyContent: \"space-between\"}}>\n                    {selectedModes.map((mode, idx) => <Mode key={idx} id={mode.id} index={idx} name={mode.mode_name} url={mode} selected={true} maxHeight=\"50px\" grouped={true}  />)}\n                    <div>\n                        <Button onClick={this.submit} className=\"submit\">Confirm Submission</Button>\n                    </div>\n                </div>\n            <Container>\n\n                {JSON.parse(localStorage.getItem(\"group\")) === 1\n                    ?\n                    /* DISPLAY GROUPED RESULTS  */\n                    answers.map((data, index) => {\n                        return <Container key={index} className=\"dark-overlay\" >\n                            <Row key={index} style={{ padding: '15px' }}>\n                                <Col key={index} sm=\"12\" md={{ size: 12 }}>\n                                    <FormGroup key={index}>\n                                        <h5> {index + 1} {data.question} </h5>\n                                        <Frequency key={data.questionID} questionId={data.questionID} value={data.frequency} disable={\"disabled\"} />\n                                    </FormGroup>\n                                    <p>Comment : {data.comment ? data.comment : \"none\"}</p>\n                                    {/* <Motivation key={data.questionID} questionId={data.questionID} items={motivations} value={data.motivationID} /> */}\n\n                                    {/* <Comments key={data.questionID + 'coucou'} questionId={data.questionID} comment={data.comment} disable={\"disabled\"} /> */}\n\n                                </Col>\n\n                            </Row>\n                        </Container>\n                    })\n\n                    :\n                    /* DISPLAY SEPARATE RESULTS */\n                    JSON.parse(localStorage.getItem(\"selectedModes\")).map((mode) => {\n                        return JSON.parse(localStorage.getItem(mode.id)).map((data, index) => {\n                            return (\n                                <Container key={index} className=\"dark-overlay\" >\n                                    {index === 0 && <h3>{mode.mode_name}</h3>}\n                                    <Row key={index} style={{ padding: '15px' }}>\n                                        <Col key={index} sm=\"12\" md={{ size: 12 }}>\n                                            <FormGroup key={index}>\n                                                <h3> {data.index} {data.question} </h3>\n                                                <Frequency key={data.questionID} questionId={data.questionID} value={data.frequency} disable={\"disabled\"} />\n                                            </FormGroup>\n                                            <h5>Comment : {data.comment}</h5>\n                                            <Motivation key={data.questionID} questionId={data.questionID} items={motivations} value={data.motivationID} />\n                                            {/* <Comments key={data.questionID + 'coucou'} questionId={data.questionID} comment={data.comment} disable={\"disabled\"} /> */}\n                                        </Col>\n                                    </Row>\n                                </Container>\n                            )\n                        })\n                    })\n                }\n                <Button onClick={this.submit} className=\"submit\">Confirm Submission</Button>\n                <Link to={{ pathname: \"/formpage\"}} className=\"back-form\">\n                    <Button>Back to Form</Button>\n                </Link>\n                </Container>\n            </>\n        )\n\n    }\n\n}\n\n"]},"metadata":{},"sourceType":"module"}