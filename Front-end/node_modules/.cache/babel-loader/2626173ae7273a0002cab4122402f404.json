{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\aggad.samy\\\\Workspace\\\\UITP-React-Spring\\\\Front-end\\\\src\\\\components\\\\FormPage\\\\Mainform\\\\MainForm.js\";\nimport Frequency from './Frequency/Radio';\nimport Comments from './Comment/Comment'; // import Legend from './Legend/Legend';\n\nimport Motivation from './Motivation/Motivation';\nimport Categories from './Categories/Categories';\nimport URLStorage from '../../../constants';\nimport { Link } from 'react-router-dom';\nimport uniqueid from 'uniqid';\nimport { AsyncStorage } from 'AsyncStorage'; // import  ConfirmModal  from '../Modal';\n\nimport '../../../App.css';\nimport axios from 'axios';\nimport React from 'react';\nimport { Container, Row, Col, Button, Form, FormGroup } from 'reactstrap';\nimport './MainForm.css';\nimport DropdownExampleCompact from './Motivation/Motivation';\nimport { ButtonGroup, Dropdown } from 'semantic-ui-react';\nimport DropdownMotivation from './Motivation/Motivation';\nexport default class MainForm extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.handleSelection = idx => e => {\n      this.setState({\n        selectedMode: idx\n      });\n    };\n\n    this.next = () => {\n      let id = this.state.id + 1;\n      this.fetchQuestions(id);\n      this.setState(prevState => ({\n        selectedCat: prevState.selectedCat + 1,\n        id: prevState.id + 1\n      }));\n    };\n\n    this.prev = () => {\n      let id = this.state.id - 1;\n      this.fetchQuestions(id);\n      this.setState(prevState => ({\n        selectedCat: prevState.selectedCat - 1,\n        id: prevState.id - 1\n      }));\n    };\n\n    this.fetchQuestions = id => {\n      axios.get(\"\".concat(URLStorage.API_URL, \"/getAllQuestions/\").concat(id)).then(res => {\n        const data = res.data;\n        this.setState({\n          question: data,\n          isLoaded: true\n        });\n      });\n    };\n\n    this.test = question => {\n      var test = this.state.allData;\n\n      if (test === null) {\n        return this.setState({\n          allData: []\n        });\n      } else {\n        for (let i = 0; i < test.length; i++) {\n          if (test[i].question === question) {\n            if (test[i].frequency) {\n              console.log(\"frequency\", test[i].frequency);\n              return test[i].frequency;\n            } else if (test[i].motivation) {\n              console.log(\"motivation\", test[i].motivation);\n              return test[i].motivation;\n            } else if (test[i].comment) {\n              console.log(\"comment\", test[i].comment);\n              return test[i].comment;\n            } else {\n              console.log(\"Nothing\");\n            }\n          }\n        }\n      }\n    };\n\n    this.selectCat = e => {\n      this.setState({\n        selectedCat: e.target.value\n      });\n      localStorage.setItem(this.props.id, JSON.stringify(this.state.answers));\n    };\n\n    this.frequencyCallback = regularityCall => {\n      this.setState({\n        regularityFromChild: regularityCall\n      });\n    };\n\n    this.state = {\n      question: [],\n      id: 1,\n      test: null,\n      allData: [],\n      answers: [],\n      value: [],\n      selectedCat: 1,\n      selectedMode: 0,\n      dataGet: [],\n      incidentName: \"\"\n    };\n  }\n\n  allStorage() {\n    var archive = [],\n        keys = Object.keys(localStorage),\n        i = 0,\n        key;\n\n    for (; key = keys[i]; i++) {\n      archive.push(key + '=' + localStorage.getItem(key));\n    }\n\n    return console.log(archive);\n  }\n\n  async handleClick(question) {\n    if (this.state.allData.length) {\n      var getQuestion = this.state.allData.find(function (data, id) {\n        if (data.id === question.id) {\n          return data;\n        } else {\n          return false;\n        }\n      });\n\n      if (getQuestion) {\n        var indexOf = this.state.allData.indexOf(getQuestion);\n\n        for (var key in getQuestion) {\n          if (getQuestion[key] === question[key] || getQuestion[key] === undefined) {\n            getQuestion[key] = question[key];\n            await this.state.allData.splice(indexOf, 1, question);\n            localStorage.setItem(\"bigItem\", JSON.stringify(this.state.allData));\n          }\n        }\n      } else {\n        await this.setState({\n          allData: [...this.state.allData, question]\n        });\n        localStorage.setItem(\"bigItem\", JSON.stringify(this.state.allData));\n      }\n    } else {\n      await this.setState({\n        allData: [question]\n      });\n      localStorage.setItem(\"bigItem\", JSON.stringify(this.state.allData));\n    }\n\n    await localStorage.setItem(\"bigItem\", JSON.stringify(this.state.allData)); // To retrive that item\n    // AsyncStorage.getItem('bigItem')\n    // .then(val => {\n    // if (val !== null) console.log(\"value \", val); // You can do whatever you want with the email\n    // })\n    // .catch(err => console.error(\"error \", err)) // if there was an error fetching data\n\n    console.log(\"this state all data in handleClik \", this.state.allData);\n  }\n\n  componentDidMount() {\n    var bigItem = JSON.parse(localStorage.getItem(\"bigItem\"));\n    this.fetchQuestions(1);\n    const transportId = this.props.id;\n    this.setState({\n      modeID: transportId\n    });\n\n    if (this.state.allData.filter(answer => answer.frequency === null).length === 0) {\n      let completeMode = JSON.parse(localStorage.getItem(\"completedModes\"));\n      completeMode[this.props.index] = true;\n\n      if (this.props.group) {\n        var dummieArray = [];\n        completeMode.map(item => dummieArray.push(true));\n        localStorage.setItem(\"completedModes\", JSON.stringify(dummieArray));\n      } else {\n        localStorage.setItem(\"completedModes\", JSON.stringify(completeMode));\n      }\n    }\n  }\n\n  componentWillMount() {\n    var bigItem = JSON.parse(localStorage.getItem(\"bigItem\"));\n    var questionStorage = localStorage.getItem(\"question\");\n    var getData = JSON.parse(localStorage.getItem(\"\".concat(questionStorage)));\n    var selectedMode = JSON.parse(localStorage.getItem(\"selectedModes\"));\n    var selectedModeName = [];\n\n    for (var i in selectedMode) {\n      selectedModeName.push(selectedMode[i].name);\n    }\n\n    if (bigItem) {\n      bigItem.selectedMode = selectedModeName;\n    } else {\n      bigItem = [];\n    }\n\n    this.setState({\n      allData: bigItem,\n      dataGet: getData\n    });\n  }\n\n  render() {\n    // NEXT / SUBMIT BUTTON SWITCH\n    console.log(\"THE STATE \", this.state.allData);\n    const nextSubmit = this.state.selectedCat === 5 ? // || (parseInt((localStorage.getItem(\"group\")) === 1)\n    JSON.parse(localStorage.getItem(\"completedModes\")).filter(item => item === false).length === 0 ? React.createElement(Link, {\n      to: {\n        pathname: \"/confirmation\",\n        state: {\n          answers: this.state.answers\n        }\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 268\n      },\n      __self: this\n    }, React.createElement(Button, {\n      onClick: this.submit,\n      className: \"submit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 269\n      },\n      __self: this\n    }, \"Submit\")) : React.createElement(React.Fragment, null, React.createElement(Button, {\n      className: \"submit\",\n      disabled: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 272\n      },\n      __self: this\n    }, \"Submit\")) : React.createElement(Button, {\n      onClick: this.next,\n      className: \"submit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 275\n      },\n      __self: this\n    }, \"Next\");\n    return React.createElement(React.Fragment, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 277\n      },\n      __self: this\n    }, React.createElement(Container, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 278\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      style: {\n        display: \"flex\",\n        justifyContent: \"flex-end\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 279\n      },\n      __self: this\n    }, this.state.selectedCat !== 1 && React.createElement(Button, {\n      style: {\n        marginRight: \"10px\"\n      },\n      onClick: this.prev,\n      className: \"submit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 280\n      },\n      __self: this\n    }, \"Previous\"), nextSubmit), React.createElement(Categories, {\n      idPage: this.state.id,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 283\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 284\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 285\n      },\n      __self: this\n    }), this.state.question.map((question, index) => {\n      var allData = this.state.allData;\n      var questionParent = question;\n      this.state.incidentName = questionParent.incident.name;\n      localStorage.setItem(\"question\", question.question);\n      var questionStorage = localStorage.getItem(\"question\");\n      localStorage.setItem(\"\".concat(questionStorage), JSON.stringify(questionParent));\n      var getData = JSON.parse(localStorage.getItem(\"\".concat(questionStorage))); // for(var i = 0; i < allData.length; i++){\n      //     var getFrequency = allData[i].frequency\n      //     console.log(\"get data \", getFrequency)\n      // }\n      //console.log(\"get data \", allData)\n\n      return React.createElement(\"ul\", {\n        key: index,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 300\n        },\n        __self: this\n      }, React.createElement(\"li\", {\n        value: question.question,\n        key: index,\n        style: {\n          fontSize: \"20px\"\n        },\n        onClick: this.handleClick.bind(this, question),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 303\n        },\n        __self: this\n      }, question.question, React.createElement(DropdownMotivation, {\n        key: index,\n        listNameFromParent: questionParent //value={this.test(question.question)}\n        ,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 312\n        },\n        __self: this\n      }), React.createElement(Frequency, {\n        callBackFromParent: this.frequencyCallback,\n        listNameFromParent: questionParent,\n        value: this.test(question.question),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 317\n        },\n        __self: this\n      }), React.createElement(Comments, {\n        listNameFromParent: questionParent,\n        getComment: this.getBackComment //value={this.test(question.question)}\n        ,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 322\n        },\n        __self: this\n      })));\n    })));\n  }\n\n}","map":{"version":3,"sources":["C:\\Users\\aggad.samy\\Workspace\\UITP-React-Spring\\Front-end\\src\\components\\FormPage\\Mainform\\MainForm.js"],"names":["Frequency","Comments","Motivation","Categories","URLStorage","Link","uniqueid","AsyncStorage","axios","React","Container","Row","Col","Button","Form","FormGroup","DropdownExampleCompact","ButtonGroup","Dropdown","DropdownMotivation","MainForm","Component","constructor","props","handleSelection","idx","e","setState","selectedMode","next","id","state","fetchQuestions","prevState","selectedCat","prev","get","API_URL","then","res","data","question","isLoaded","test","allData","i","length","frequency","console","log","motivation","comment","selectCat","target","value","localStorage","setItem","JSON","stringify","answers","frequencyCallback","regularityCall","regularityFromChild","dataGet","incidentName","allStorage","archive","keys","Object","key","push","getItem","handleClick","getQuestion","find","indexOf","undefined","splice","componentDidMount","bigItem","parse","transportId","modeID","filter","answer","completeMode","index","group","dummieArray","map","item","componentWillMount","questionStorage","getData","selectedModeName","name","render","nextSubmit","pathname","submit","display","justifyContent","marginRight","questionParent","incident","fontSize","bind","getBackComment"],"mappings":"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","sourcesContent":["import Frequency from './Frequency/Radio';\nimport Comments from './Comment/Comment';\n// import Legend from './Legend/Legend';\nimport Motivation from './Motivation/Motivation'\nimport Categories from './Categories/Categories'\nimport URLStorage from '../../../constants';\nimport { Link } from 'react-router-dom';\nimport uniqueid from 'uniqid';\nimport { AsyncStorage } from 'AsyncStorage';\n// import  ConfirmModal  from '../Modal';\n\nimport '../../../App.css';\n\nimport axios from 'axios';\nimport React from 'react';\nimport { Container, Row, Col, Button, Form, FormGroup } from 'reactstrap';\n\nimport './MainForm.css'\nimport DropdownExampleCompact from './Motivation/Motivation';\nimport { ButtonGroup, Dropdown } from 'semantic-ui-react';\nimport DropdownMotivation from './Motivation/Motivation';\n\nexport default class MainForm extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            question: [],\n            id: 1,\n            test: null,\n            allData: [],\n            answers: [],\n            value: [],\n            selectedCat: 1,\n            selectedMode: 0,\n            dataGet: [],\n            incidentName: \"\",\n\n        }\n    }\n\n    allStorage() {\n\n        var archive = [],\n            keys = Object.keys(localStorage),\n            i = 0, key;\n\n        for (; key = keys[i]; i++) {\n            archive.push(key + '=' + localStorage.getItem(key));\n        }\n\n        return console.log(archive);\n    }\n\n    async handleClick(question) {\n        if (this.state.allData.length) {\n            var getQuestion = this.state.allData.find(function (data, id) {\n                if (data.id === question.id) {\n                    return data\n                } else {\n                    return false\n                }\n            })\n            if (getQuestion) {\n                var indexOf = this.state.allData.indexOf(getQuestion);\n                for (var key in getQuestion) {\n                    if (getQuestion[key] === question[key] || getQuestion[key] === undefined) {\n                        getQuestion[key] = question[key]\n                        await this.state.allData.splice(indexOf, 1, question)\n                        localStorage.setItem(\"bigItem\", JSON.stringify(this.state.allData))\n                    }\n                }\n            } else {\n                await this.setState({ allData: [...this.state.allData, question] })\n                localStorage.setItem(\"bigItem\", JSON.stringify(this.state.allData))\n\n            }\n        } else {\n            await this.setState({ allData: [question] })\n            localStorage.setItem(\"bigItem\", JSON.stringify(this.state.allData))\n        }\n        await localStorage.setItem(\"bigItem\", JSON.stringify(this.state.allData))\n\n        // To retrive that item\n        // AsyncStorage.getItem('bigItem')\n        // .then(val => {\n        // if (val !== null) console.log(\"value \", val); // You can do whatever you want with the email\n        // })\n        // .catch(err => console.error(\"error \", err)) // if there was an error fetching data\n\n        console.log(\"this state all data in handleClik \", this.state.allData)\n    }\n\n    handleSelection = (idx) => (e) => {\n        this.setState({ selectedMode: idx });\n    };\n\n    next = () => {\n        let id = this.state.id + 1;\n        this.fetchQuestions(id);\n        this.setState(prevState => ({\n            selectedCat: prevState.selectedCat + 1,\n            id: prevState.id + 1,\n\n        }));\n\n\n    }\n    prev = () => {\n        let id = this.state.id - 1;\n        this.fetchQuestions(id);\n        this.setState(prevState => ({\n            selectedCat: prevState.selectedCat - 1,\n            id: prevState.id - 1,\n        }));\n\n    }\n\n\n    fetchQuestions = (id) => {\n        axios.get(`${URLStorage.API_URL}/getAllQuestions/${id}`)\n            .then(res => {\n                const data = res.data\n                this.setState({\n                    question: data,\n                    isLoaded: true,\n                })\n            })\n    }\n\n    // test = (question) => {\n    //     var test = this.state.allData\n    //     if (test === null) {\n    //         return this.setState({\n    //             allData: []\n    //         })\n    //     } \n    //else {\n\n    //     for (let i = 0; i < test.length; i++) {\n    //         if (test[i].question === question) {\n    //         }\n\n    //     }\n    // }\n\n\n    //}\n\n    test = (question) => {\n        var test = this.state.allData\n        if (test === null) {\n            return this.setState({\n                allData: []\n            })\n        } else {\n            for (let i = 0; i < test.length; i++) {\n                if (test[i].question === question) {\n                    if (test[i].frequency) {\n                        console.log(\"frequency\", test[i].frequency)\n                        return test[i].frequency\n                    } else if (test[i].motivation) {\n                        console.log(\"motivation\", test[i].motivation)\n                        return test[i].motivation\n                    } else if (test[i].comment) {\n                        console.log(\"comment\", test[i].comment)\n                        return test[i].comment\n                    } else {\n                        console.log(\"Nothing\")\n                    }\n\n\n                }\n\n            }\n        }\n\n    }\n\n        // anyChange = (id) => (e) => {\n        //     const inputName = e.target.name;\n        //     const inputValue = e.target.value;\n        //     let entries = Object.assign({}, this.state);\n        //     const { answers } = entries;\n        //     answers.map(answer => answer.questionID === id ? answer[inputName] = inputValue : undefined);\n        //     this.setState(entries);\n        //     localStorage.setItem(this.props.id, JSON.stringify(this.state.answers));\n\n        //     // ------------ SWITCH BOOLEAN TO COMPLETED FOR CURRENT MODE ---------------\n\n        //     console.log(this.state.allData)\n\n        //     if (this.state.allData.filter(answer => answer.frequency === null).length === 0) {\n\n        //         let completeMode = JSON.parse(localStorage.getItem(\"completedModes\"));\n        //         completeMode[this.props.index] = true;\n\n        //         if (this.props.group) {\n        //             var dummieArray = [];\n        //             completeMode.map(item => dummieArray.push(true));\n        //             localStorage.setItem(\"completedModes\", JSON.stringify(dummieArray));\n\n        //         } else {\n        //             localStorage.setItem(\"completedModes\", JSON.stringify(completeMode));\n        //         }\n        //     }\n        // }\n\n        selectCat = (e) => {\n            this.setState({ selectedCat: e.target.value })\n            localStorage.setItem(this.props.id, JSON.stringify(this.state.answers));\n        }\n        frequencyCallback = (regularityCall) => {\n            this.setState({\n                regularityFromChild: regularityCall\n            })\n        }\n        componentDidMount() {\n            var bigItem = JSON.parse(localStorage.getItem(\"bigItem\"))\n            this.fetchQuestions(1);\n\n            const transportId = this.props.id;\n            this.setState({ modeID: transportId })\n\n            if (this.state.allData.filter(answer => answer.frequency === null).length === 0) {\n\n                let completeMode = JSON.parse(localStorage.getItem(\"completedModes\"));\n                completeMode[this.props.index] = true;\n\n                if (this.props.group) {\n                    var dummieArray = [];\n                    completeMode.map(item => dummieArray.push(true));\n                    localStorage.setItem(\"completedModes\", JSON.stringify(dummieArray));\n\n                } else {\n                    localStorage.setItem(\"completedModes\", JSON.stringify(completeMode));\n                }\n            }\n        };\n\n\n\n        componentWillMount(){\n            var bigItem = JSON.parse(localStorage.getItem(\"bigItem\"))\n            var questionStorage = localStorage.getItem(\"question\");\n            var getData = JSON.parse(localStorage.getItem(`${questionStorage}`))\n            var selectedMode = JSON.parse(localStorage.getItem(\"selectedModes\"))\n            var selectedModeName = [];\n            for (var i in selectedMode) {\n                selectedModeName.push(selectedMode[i].name)\n            }\n            if (bigItem) {\n                bigItem.selectedMode = selectedModeName\n            }\n            else {\n                bigItem = []\n            }\n\n            this.setState({ allData: bigItem, dataGet: getData })\n        }\n\n\n        render() {\n            // NEXT / SUBMIT BUTTON SWITCH\n            console.log(\"THE STATE \", this.state.allData)\n            const nextSubmit = this.state.selectedCat === 5 ?\n                // || (parseInt((localStorage.getItem(\"group\")) === 1)\n                (JSON.parse(localStorage.getItem(\"completedModes\")).filter(item => item === false).length === 0) ?\n                    <Link to={{ pathname: \"/confirmation\", state: { answers: this.state.answers } }}>\n                        <Button onClick={this.submit} className=\"submit\" >Submit</Button>\n                    </Link>\n                    : <>\n                        <Button className=\"submit\" disabled>Submit</Button>\n                    </>\n                :\n                <Button onClick={this.next} className=\"submit\">Next</Button>;\n            return (\n                <React.Fragment>\n                    <Container>\n                        <div style={{ display: \"flex\", justifyContent: \"flex-end\" }}>\n                            {this.state.selectedCat !== 1 && <Button style={{ marginRight: \"10px\" }} onClick={this.prev} className=\"submit\" >Previous</Button>}\n                            {nextSubmit}\n                        </div>\n                        <Categories idPage={this.state.id} />\n                        <br />\n                        <br />\n                        {this.state.question.map((question, index) => {\n                            var allData = this.state.allData\n                            var questionParent = question\n                            this.state.incidentName = questionParent.incident.name\n                            localStorage.setItem(\"question\", question.question)\n                            var questionStorage = localStorage.getItem(\"question\");\n                            localStorage.setItem(`${questionStorage}`, JSON.stringify(questionParent))\n                            var getData = JSON.parse(localStorage.getItem(`${questionStorage}`))\n                            // for(var i = 0; i < allData.length; i++){\n                            //     var getFrequency = allData[i].frequency\n                            //     console.log(\"get data \", getFrequency)\n                            // }\n                            //console.log(\"get data \", allData)\n                            return (\n                                <ul\n                                    key={index}\n                                >\n                                    <li\n                                        value={question.question}\n                                        key={index}\n                                        style={{ fontSize: \"20px\" }}\n                                        onClick={this.handleClick.bind(this, question)}\n                                    >\n                                        {\n                                            question.question\n                                        }\n                                        <DropdownMotivation\n                                            key={index}\n                                            listNameFromParent={questionParent}\n                                        //value={this.test(question.question)}\n                                        />\n                                        <Frequency\n                                            callBackFromParent={this.frequencyCallback}\n                                            listNameFromParent={questionParent}\n                                            value={this.test(question.question)}\n                                        />\n                                        <Comments\n                                            listNameFromParent={questionParent}\n                                            getComment={this.getBackComment}\n                                        //value={this.test(question.question)}\n                                        />\n                                    </li>\n                                </ul>\n                            );\n                        })}\n                    </Container>\n                </React.Fragment>\n            )\n        }\n    }\n\n"]},"metadata":{},"sourceType":"module"}